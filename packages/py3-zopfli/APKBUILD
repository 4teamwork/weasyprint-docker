# Automatically generated by apkbuild-pypi, template 3
# Contributor: Thomas Buchberger <thomas.buchberger@gmail.com>
# Maintainer: Thomas Buchberger <thomas.buchberger@gmail.com>
pkgname=py3-zopfli
#_pkgreal is used by apkbuild-pypi to find modules at PyPI
_pkgreal=zopfli
pkgver=0.2.1
pkgrel=0
pkgdesc="Zopfli module for python"
provides=""
replaces=""
url="http://packages.python.org/pypi/zopfli"
arch="all"
license="ASL"
depends="python3 zopfli"
checkdepends="py3-pytest"
makedepends="python3-dev zopfli-dev py3-wheel py3-setuptools py3-setuptools_scm"
subpackages=""
source="https://files.pythonhosted.org/packages/91/25/ba6f370e18359292f05ca4df93642eb7d1c424721ef61f61b8610a63d0c5/zopfli-0.2.1.zip"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
	USE_SYSTEM_ZOPFLI=1 python3 setup.py build
}

check() {
	PYTHONPATH=$(echo build/lib.*) pytest
}

package() {
	python3 setup.py install --skip-build --prefix=/usr --root="$pkgdir"
}

sha512sums="
73f8be5209d62a2f26f70584827f540a441f00e98a5e621981f1b12bb7fe7481e2571746524d7a9fd0a16e1eac957941663cf05f6494e4527974ebb83791f987  zopfli-0.2.1.zip
"
